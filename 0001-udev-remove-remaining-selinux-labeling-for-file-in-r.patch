From 3cbd5f6be191a4e71fc85d8b893e96d6d65bf792 Mon Sep 17 00:00:00 2001
From: Kay Sievers <kay@vrfy.org>
Date: Tue, 5 Jun 2012 17:31:32 +0200
Subject: [PATCH] udev: remove remaining selinux labeling for file in /run

---
 src/libudev/libudev-device-private.c |    4 ++--
 src/udev/udev-node.c                 |    2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/libudev/libudev-device-private.c b/src/libudev/libudev-device-private.c
index bdb0e70..2347736 100644
--- a/src/libudev/libudev-device-private.c
+++ b/src/libudev/libudev-device-private.c
@@ -35,7 +35,7 @@ static void udev_device_tag(struct udev_device *dev, const char *tag, bool add)
         if (add) {
                 int fd;
 
-                mkdir_parents_label(filename, 0755);
+                mkdir_parents(filename, 0755);
                 fd = open(filename, O_WRONLY|O_CREAT|O_CLOEXEC|O_TRUNC|O_NOFOLLOW, 0444);
                 if (fd >= 0)
                         close(fd);
@@ -119,7 +119,7 @@ int udev_device_update_db(struct udev_device *udev_device)
 
         /* write a database file */
         util_strscpyl(filename_tmp, sizeof(filename_tmp), filename, ".tmp", NULL);
-        mkdir_parents_label(filename_tmp, 0755);
+        mkdir_parents(filename_tmp, 0755);
         f = fopen(filename_tmp, "we");
         if (f == NULL) {
                 udev_err(udev, "unable to create temporary db file '%s': %m\n", filename_tmp);
diff --git a/src/udev/udev-node.c b/src/udev/udev-node.c
index 2ef6341..aee84a9 100644
--- a/src/udev/udev-node.c
+++ b/src/udev/udev-node.c
@@ -226,7 +226,7 @@ static void link_update(struct udev_device *dev, const char *slink, bool add)
                 do {
                         int fd;
 
-                        err = mkdir_parents_label(filename, 0755);
+                        err = mkdir_parents(filename, 0755);
                         if (err != 0 && err != -ENOENT)
                                 break;
                         fd = open(filename, O_WRONLY|O_CREAT|O_CLOEXEC|O_TRUNC|O_NOFOLLOW, 0444);
-- 
1.7.10.2

